google.maps.__gjsload__('drawing_impl', function(_){var P2=function(a,b){function c(f,g,h,k){var l=_.W("div",a);_.OJ(l,"left");l.style.lineHeight="0";g={title:g,Fe:h,eg:k,padding:[4],Bf:!0};h=_.W("span");h.style.display="inline-block";var m=f||"hand",q=L2[m],r=_.sC(d,h,new _.P(0,q),M2);r.style.position="relative";var u=_.cL(l,h,f,g);_.S.addListener(u,"active_changed",function(){var v=u.get("active")?N2[m]:q;_.tC(r,M2,new _.P(0,v))});u.bindTo("value",e,"drawingMode")}var d=_.Qm("drawing"),e=this;c(null,"Stop drawing",!0,!b.length);_.C(b,function(f,
g){var h=O2[f];h&&c(f,h,!1,g==b.length-1)})},Q2=_.n(),R2=function(a,b,c){this.A=a;this.B=b;this.D=c},S2=function(a){if(!a.j){var b={};_.Kc(b,a.get("options"));null==b.zIndex&&(b.zIndex=a.D());delete b.map;a.j=a.A.l(b)}},T2=function(a,b){a.j&&(a.l?(a.j.get("map")||a.j.bindTo("map",a),a.A.j(a.j,a.l,b)):a.A.j(a.j,b))},U2=function(a,b){T2(a,b);b=a.j;b.unbind("map");a.j=null;_.S.trigger(a,"overlaycomplete",{type:a.A.A(),overlay:b});_.S.trigger(a,a.A.m(),b);a.l=null;a.m=!1},V2=_.n(),W2=function(a){this.l=
a;this.j=null},X2=function(a){if(!a.j){var b={};_.Kc(b,a.get("options"));delete b.map;a.j=new _.of(b)}},Y2=function(a,b,c,d){this.m=a;this.l=b;this.A=c;this.B=d+1E-6;this.j=null;this.H=new _.P(0,0);this.D=new _.P(0,0);this.F=new _.P(0,0)},Z2=function(a,b){a.j.cc.getPath().push(b);a.j.Mb.set("anchors",[b])},b3=function(a,b){var c=$2(a,b);c?(a.m||2!=c.type||Z2(a,c.latLng),a3(a)):Z2(a,b)},$2=function(a,b){var c=a.j.cc.getPath(),d=c.getLength();if(d){var e=a.get("map"),f=e.get("projection");e=e.__gm.get("zoom");
e=a.B/(1<<e);var g=f.fromLatLngToPoint(b,a.H);b=b.lng();d=c.getAt(d-1);var h=new _.R(d.lat(),_.Mc(d.lng(),b-180,b+180),!0);h=f.fromLatLngToPoint(h,a.D);if(Math.abs(g.x-h.x)<=e&&Math.abs(g.y-h.y)<=e)return{type:1,latLng:d};c=c.getAt(0);b=new _.R(c.lat(),_.Mc(c.lng(),b-180,b+180),!0);a=f.fromLatLngToPoint(b,a.F);if(Math.abs(g.x-a.x)<=e&&Math.abs(g.y-a.y)<=e)return{type:2,latLng:c}}return null},d3=function(a){var b=a.get("options"),c=new _.T;c.setValues(b);var d=new _.AI(c,a.m);c={};_.Kc(c,b);c.strokeColor=
d.get("strokeColor");c.strokeOpacity=d.get("strokeOpacity");c.strokeWeight=d.get("strokeWeight");null==c.zIndex&&(c.zIndex=a.A());delete c.path;delete c.map;var e=new _.vh(c);e.bindTo("map",a);c.strokeOpacity=d.get("ghostStrokeOpacity");d=new _.xI;d.setValues(c);d.set("anchors",[]);d.bindTo("map",a);var f=null;a.m&&(f={},_.Kc(f,b),f.zIndex=c.zIndex,f.paths=new _.je([e.getPath()]),delete f.map,f=new _.uh(f));a.j={cc:e,Kh:f,Mb:d};c3(a)},a3=function(a){var b=a.j.cc;b.unbind("map");var c=a.j.Kh;a.j.Mb.unbind("map");
a.j.Mb.set("map",null);a.j=null;a.set("draggableCursor",a.l);if(b.getPath().getLength()){if(a.m){b.set("map",null);c.set("map",a.get("map"));var d={type:"polygon",overlay:c};_.S.trigger(a,"overlaycomplete",d);_.S.trigger(a,"polygoncomplete",c)}else d={type:"polyline",overlay:b},_.S.trigger(a,"overlaycomplete",d),_.S.trigger(a,"polylinecomplete",b);c3(a)}else b.set("map",null)},c3=function(a){a.set("enablePanning",!!a.j&&a.get("drawPolysWithDrag")&&!a.get("panWhileDrawing"))},e3=_.n(),f3=function(a,
b){if(a.lat()<b.lat()){var c=a.lat();var d=b.lat()}else c=b.lat(),d=a.lat();if(180>=_.Dd(a.lng(),b.lng())){var e=a.lng();a=b.lng()}else e=b.lng(),a=a.lng();return _.Hd(c,e,d,a)},g3=function(){var a=0;return function(){return a++}},k3=function(){var a=this.l=h3(this);this.ja=i3(this);var b="url("+_.Pm+"crosshair.cur)";_.tm.m&&(b+=" 7 7");b+=", crosshair";var c=g3();this.B=6+(_.vm()?9:0);this.m={circle:new R2(new V2,b,c),marker:new W2(b),polygon:new Y2(!0,b,c,this.B),polyline:new Y2(!1,b,c,this.B),
rectangle:new R2(new e3,b,c)};b=j3(this);for(var d in this.m)c=this.m[d],c.bindTo("map",this),c.bindTo("panWhileDrawing",this),c.bindTo("draggingCursor",a),c.bindTo("draggableCursor",b),c.bindTo("enablePanning",a,"panAtEdge"),c.bindTo("options",this,d+"Options"),_.S.forward(c,"overlaycomplete",this),_.S.forward(c,d+"complete",this);this.m.polygon.bindTo("drawPolysWithDrag",this);this.m.polyline.bindTo("drawPolysWithDrag",this);this.j=null;this.va=[];this.A=this.D=null;this.J=0;this.ca=this.H=null;
this.F=this.K=void 0},h3=function(a){var b="click dblclick movestart move moveend panbynow mousewheel mousemove".split(" "),c=new _.vI(b),d=!1;_.C(b,function(e){_.S.addListener(c,e,function(f,g){var h=f instanceof _.hn,k=h?f.ea:f;if("click"==e||"dblclick"==e||"mousemove"==e)h?("click"==e&&_.mn(f),"dblclick"==e&&_.mn(f),"mousemove"==e&&_.kn(f)):_.Nd(f);if("mousewheel"!=e&&(!d||"mousemove"!=e)){if("mousemove"==e||"move"==e)a.H=e,a.ca=k,a.K=g;if(d||!a.get("panWhileDrawing"))"movestart"==e&&(d=!0),"moveend"==
e&&(d=!1),f=_.Vk(),"panbynow"==e?a.H&&l3(a,a.H,a.ca,f,a.K):l3(a,e,k,f,g)}})});return c},i3=function(a){var b=new _.tx(["map","drawingMode","pegmanDragging"],"active",function(c,d,e){return!!c&&!!d&&!e});b.bindTo("map",a);b.bindTo("drawingMode",a);a.l.bindTo("active",b);return b},j3=function(a){var b=new _.tx(["draggableCursor","panWhileDrawing"],"cursor",function(c,d){return d?null:c});b.bindTo("panWhileDrawing",a);a.l.bindTo("draggableCursor",b,"cursor");return b},l3=function(a,b,c,d,e){var f=a.get("map");
if(a.j){var g=f.__gm.get("projectionController"),h=f.__gm.get("panes");if(g&&h&&(e=e||c,a.F&&e)){g=a.F.zb(e);f=_.ul(g,f.getProjection());e=new _.P(e.clientX,e.clientY);(g=(g=a.get("snappingCallback"))&&g(a.j.If(f)))&&(f=g);g=!1;if("click"==b){if(300>=d-a.J&&a.A&&_.Nc(a.A.x,e.x,a.B)&&_.Nc(a.A.y,e.y,a.B))return;a.A=e;a.J=d;g=a.j.ee(f)}else"dblclick"==b?g=a.j.uh():"mousemove"==b?g=a.j.uf(f):"movestart"==b?g=a.j.xf(f):"move"==b?g=a.j.vf(f):"moveend"==b&&(g=a.j.wf(f));g&&c&&_.Nd(c)}}},n3=function(a){var b=
this;this.U=new _.lg(function(){b.j&&(b.l.Bb(b.j),_.bh(b.j),b.j=null,b.m.unbindAll(),b.m=null);b.l=b.get("layoutManager");if(b.l&&0!=b.get("drawingControl")){var d=b.get("drawingControlOptions")||{},e=d.drawingModes||m3,f=document.createElement("div");_.ex(f);f.style.margin=_.V(5);_.Fm(f,10);b.j=f;b.m=new P2(b.j,e);b.m.bindTo("drawingMode",b);b.l.addElement(b.j,d.position||1,!1,.25)}},0);var c=new k3;c.bindTo("map",a);c.bindTo("drawingMode",a);c.bindTo("panWhileDrawing",a);c.bindTo("markerOptions",
a);c.bindTo("polygonOptions",a);c.bindTo("polylineOptions",a);c.bindTo("rectangleOptions",a);c.bindTo("circleOptions",a);c.bindTo("drawPolysWithDrag",a);_.S.forward(c,"overlaycomplete",a);_.S.forward(c,"circlecomplete",a);_.S.forward(c,"markercomplete",a);_.S.forward(c,"polygoncomplete",a);_.S.forward(c,"polylinecomplete",a);_.S.forward(c,"rectanglecomplete",a);this.bindTo("map",a);this.bindTo("drawingControl",a);this.bindTo("drawingControlOptions",a);this.bindTo("drawingMode",a);this.set("snappingCallback",
a.get("snappingCallback"));a.bindTo("snappingCallback",this);c.bindTo("snappingCallback",this)},o3=function(a){switch(a){case null:return null;case "Point":return"marker";case "LineString":return"polyline";case "Polygon":return"polygon";default:return null}};_.A(P2,_.T);
var O2={marker:"Add a marker",polygon:"Draw a shape",polyline:"Draw a line",rectangle:"Draw a rectangle",circle:"Draw a circle"},M2=new _.Q(16,16),N2={hand:144,marker:112,polygon:96,polyline:128,rectangle:48,circle:0},L2={hand:80,marker:176,polygon:64,polyline:32,rectangle:16,circle:160};_.A(Q2,_.T);_.p=Q2.prototype;_.p.ee=_.qa(!1);_.p.uh=_.qa(!1);_.p.uf=_.qa(!1);_.p.xf=_.qa(!1);_.p.vf=_.qa(!1);_.p.wf=_.qa(!1);_.A(R2,Q2);_.p=R2.prototype;_.p.If=function(a){S2(this);T2(this,a);return{latLng:a,overlay:this.j}};_.p.active_changed=function(){if(this.get("active"))this.set("draggableCursor",this.B),this.set("draggingCursor","");else{var a=this.j;a&&(a.unbind("map"),a.set("map",null),this.j=null);this.l=null;this.m=!1}};_.p.ee=function(a){this.l?U2(this,a):(S2(this),this.l=a,T2(this,a),this.m=!0);return!1};_.p.uf=function(a){T2(this,a);return!1};
_.p.xf=function(a){if(this.m)return!1;this.set("draggingCursor",this.B);this.set("enablePanning",!0);S2(this);this.l=a;T2(this,a);return!0};_.p.vf=function(a){if(this.m)return!1;T2(this,a);return!0};_.p.wf=function(a){if(this.m)return!1;this.set("draggingCursor","");this.set("enablePanning",!1);U2(this,a);return!0};V2.prototype.l=function(a){return new _.sh(a)};V2.prototype.j=function(a,b,c){a.set("center",b);var d=0,e=a.get("map");e&&c&&(d=e.__gm.get("baseMapType"),d=_.Ev(b,c,d&&d.radius));a.set("radius",d)};V2.prototype.A=_.qa("circle");V2.prototype.m=_.qa("circlecomplete");_.A(W2,Q2);W2.prototype.If=function(a){X2(this);this.j.setPosition(a);return{latLng:a,overlay:this.j}};W2.prototype.active_changed=function(){this.get("active")&&this.set("draggableCursor",this.l)};W2.prototype.ee=function(a){X2(this);this.j.setPosition(a);this.j.setMap(this.get("map"));_.S.trigger(this,"overlaycomplete",{type:"marker",overlay:this.j});_.S.trigger(this,"markercomplete",this.j);this.j=null;return!1};_.A(Y2,Q2);_.p=Y2.prototype;_.p.If=function(a){this.j&&this.j.cc||d3(this);return{latLng:a,overlay:this.j.Kh||this.j.cc}};_.p.active_changed=function(){this.get("active")?this.set("draggableCursor",this.l):this.j&&this.j.cc&&a3(this)};_.p.ee=function(a){if(!a)return!1;this.j?b3(this,a):(d3(this),Z2(this,a));return!1};_.p.uh=function(){this.j&&1<this.j.cc.getPath().getLength()&&a3(this);return!1};
_.p.uf=function(a){var b=a;this.j&&a&&(a=$2(this,a),this.set("draggableCursor",a?"pointer":this.l),a&&(b=a.latLng),this.j.Mb.set("freeVertexPosition",b));return!1};_.p.xf=function(a){return a?this.get("drawPolysWithDrag")?(this.j||d3(this),this.j.cc.getPath().getLength()||Z2(this,a),this.set("draggingCursor",this.l),!0):!1:!1};_.p.vf=function(a){return this.j&&this.get("drawPolysWithDrag")?(this.j.Mb.set("freeVertexPosition",a),!0):!1};
_.p.wf=function(a){return a?this.get("drawPolysWithDrag")?(this.j&&(b3(this,a),this.set("draggingCursor","")),this.j&&this.j.Mb.set("freeVertexPosition",null),!0):!1:!1};_.p.drawPolysWithDrag_changed=Y2.prototype.panWhileDrawing_changed=function(){c3(this)};e3.prototype.l=function(a){return new _.wh(a)};e3.prototype.j=function(a,b,c){a.set("bounds",f3(b,c||b))};e3.prototype.A=_.qa("rectangle");e3.prototype.m=_.qa("rectanglecomplete");_.A(k3,_.T);k3.prototype.map_changed=function(){var a=this,b=this.get("map"),c=this.ja,d=this.l;if(b){var e=b.__gm;e.j.then(function(f){a.F=f.sa});this.bindTo("mouseEventTarget",e);c.bindTo("pegmanDragging",e);d.bindTo("draggable",b);d.bindTo("scrollwheel",b);this.D=_.S.forward(d,"panbynow",e)}else this.unbind("mouseEventTarget"),this.set("mouseEventTarget",null),c.unbind("pegmanDragging"),d.unbind("draggable"),d.unbind("scrollwheel"),this.D&&(_.S.removeListener(this.D),this.D=null)};
k3.prototype.mouseEventTarget_changed=function(){var a=["panes","pixelBounds"],b=this.l;_.C(a,b.unbind,b);b=this.va;_.C(b,_.S.removeListener);b.length=0;if(this.get("mouseEventTarget")){b=this.l;var c=this.get("map");_.vw(b,a,c.__gm)}};k3.prototype.drawingMode_changed=function(){this.j&&this.j.set("active",!1);this.l.set("panAtEdge",!1);var a=this.get("drawingMode");(this.j=this.m[a])&&this.j.set("active",!0)};_.A(n3,_.T);n3.prototype.map_changed=function(){var a=this.get("map");a?(a=a.__gm,this.bindTo("layoutManager",a),a.set("snappingCallback",this.get("snappingCallback")),this.bindTo("snappingCallback",a)):(this.unbind("layoutManager"),this.set("layoutManager",null),this.unbind("snappingCallback"))};n3.prototype.layoutManager_changed=function(){_.mg(this.U)};n3.prototype.drawingControl_changed=function(){_.mg(this.U)};n3.prototype.drawingControlOptions_changed=function(){_.mg(this.U)};
var m3=["marker","polyline","rectangle","circle","polygon"];_.Ne("drawing_impl",{Ji:n3,sk:function(a){var b=new _.T,c=new _.tx(["dataDrawingMode"],"drawingManagerMode",o3);c.bindTo("dataDrawingMode",a,"drawingMode");var d=new _.tx(["styleOrStylingFunction"],"style",function(g){return"function"===typeof g?g(new _.Oe):g});d.bindTo("styleOrStylingFunction",a,"style");var e=new _.tx(["controls","controlPosition"],"drawingControlOptions",function(g,h){return{drawingModes:_.Oc(g,o3),position:h}});e.bindTo("controls",a);e.bindTo("controlPosition",a);var f=new _.tx(["controls"],
"drawingControl",function(g){return!!g});f.bindTo("controls",a);b.bindTo("map",a);b.bindTo("drawingMode",c,"drawingManagerMode");b.bindTo("markerOptions",d,"style");b.bindTo("polylineOptions",d,"style");b.bindTo("polygonOptions",d,"style");b.bindTo("drawingControlOptions",e);b.bindTo("drawingControl",f);_.S.addListener(b,"overlaycomplete",function(g){g=g.overlay;var h=_.tI([g]),k=a.get("featureFactory");h=k?k(h):new _.Oe({geometry:h});a.add(h);g.set("map",null)});new n3(b);_.S.ma(a,"map_changed",
function(){var g=a.get("map");g&&_.bn(g,"Le")})}});});
